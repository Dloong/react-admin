{"version":3,"sources":["send-code/send-code.js"],"names":["SendCode","props","timer","state","loading","status","start","second","undefined","startCountdown","setState","setInterval","timeout","onEnd","clearInterval","buttonText","sendCodeLocale","initText","resetText","runText","renderSendCode","rest","React","createElement","disabled","nextProps","LocaleReceive","componentName","defaultLocale","enUS","Component","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Button } from 'antd';\nimport { getTemplateText } from './utils';\nimport enUS from './locale/en_US';\nimport LocaleReceive from 'antd/lib/locale-provider/LocaleReceiver';\nclass SendCode extends React.Component {\n    constructor(props) {\n        super(props);\n        this.timer = null;\n        this.state = {\n            loading: false,\n            status: this.props.start ? 1 : 0,\n            second: undefined,\n        };\n        this.startCountdown = () => {\n            let second = this.state.second || this.props.second;\n            this.setState({ second, status: 1 });\n            this.timer = setInterval(() => {\n                second -= 1;\n                this.setState({ second });\n                if (second <= 0) {\n                    this.timeout();\n                }\n            }, 1000);\n        };\n        this.timeout = () => {\n            const { onEnd } = this.props;\n            // 设置为运行结束后状态\n            this.setState({\n                second: undefined,\n                status: 2,\n            });\n            if (this.timer) {\n                clearInterval(this.timer);\n            }\n            // 发出倒计时结束事件\n            onEnd && onEnd();\n        };\n        this.buttonText = (sendCodeLocale) => {\n            const { initText, resetText, runText } = this.props;\n            const { status, second } = this.state;\n            switch (status) {\n                case 1:\n                    return getTemplateText(runText || sendCodeLocale.runText, second);\n                case 2:\n                    return resetText || sendCodeLocale.resetText;\n                default:\n                    return initText || sendCodeLocale.initText;\n            }\n        };\n        this.renderSendCode = (sendCodeLocale) => {\n            const { start, initText, resetText, runText, onEnd, ...rest } = this.props;\n            const { loading, status } = this.state;\n            return (React.createElement(Button, Object.assign({ loading: loading, disabled: status === 1 }, rest), this.buttonText(sendCodeLocale)));\n        };\n    }\n    componentWillUnmount() {\n        if (this.timer) {\n            clearInterval(this.timer);\n        }\n    }\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.start) {\n            this.startCountdown();\n        }\n    }\n    render() {\n        return (React.createElement(LocaleReceive, { componentName: \"SendCode\", defaultLocale: enUS }, (sendCodeLocale) => this.renderSendCode(sendCodeLocale)));\n    }\n}\nSendCode.defaultProps = {\n    start: false,\n    second: 60,\n};\nexport default SendCode;\n"],"file":"send-code.js"}