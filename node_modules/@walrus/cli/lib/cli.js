#!/usr/bin/env node
"use strict";

var _sharedUtils = require("@walrus/shared-utils");

var _service = _interopRequireDefault(require("./service"));

var _custom = _interopRequireDefault(require("./custom"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const service = new _service.default(); // 获取需要兼容的Node版本

const requiredVersion = require('../package.json').engines.node; // 检查Node版本


(0, _sharedUtils.checkNodeVersion)(requiredVersion, 'walrus-cli'); // Node版本为9.x则给出警告

if (_sharedUtils.semver.satisfies(process.version, '9.x')) {
  _custom.default.error(`You are using Node ${process.version}.\n` + `Node.js 9.x has already reached end-of-life and will not be supported in future major releases.\n` + `It's strongly recommended to use an active LTS version instead.`);
}

const rawArgv = process.argv.slice(2);
const args = (0, _sharedUtils.minimist)(rawArgv, {
  boolean: []
});
const command = args._[0];
service.run(command, args, rawArgv).catch(err => {
  _custom.default.error(err);

  process.exit(1);
});