"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = _default;

var _commitlint = _interopRequireDefault(require("./commitlint"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const pkg = require('../package.json');

function _default(api, config) {
  api.registerCommand('commitlint', {
    description: 'lint your commit messages',
    usage: 'walrus commitlint [input]',
    options: {
      '--color': 'toggle colored output',
      '--config [file]': 'path to the config file'
    }
  }, (args, rawArgs, opts) => {
    (0, _commitlint.default)(args._, Object.assign({}, opts, args)).catch(err => setTimeout(() => {
      if (err.type === pkg.name) {
        process.exit(1);
      }

      throw err;
    }));
  });
}