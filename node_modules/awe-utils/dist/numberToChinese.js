'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

/**
 * 检查`value`是否为`number`。
 *
 * @since 0.0.6
 *
 * @param value
 * @returns {boolean}
 *
 * @example
 *
 * isNumber(1)
 * // => true
 *
 * isNumber(Number.MIN_VALUE)
 * // => true
 */
function isNumber(value) {
  return typeof value === 'number';
}

var digits = ['零', '一', '二', '三', '四', '五', '六', '七', '八', '九']; // 节权位集合

var unitSections = ['', '万', '亿', '万亿', '亿亿']; // 节内权位集合

var unitChars = ['', '十', '百', '千'];
var point = "点"; // 每小节转换方法

function sectionToChinese(section) {
  var result = '';
  var count = 0;
  var str = '';

  while (section > 0) {
    var value = section % 10;

    if (value === 0) ; else {
      str = digits[value];
      str += unitChars[count];
      result = str + result;
    }

    count++;
    section = Math.floor(section / 10);
  }

  return result;
}

function floatToChinese(number) {
  var index = number.toString().indexOf('.');

  if (index !== -1) {
    var floatStr = number.toString().slice(index);
    var result = '';

    for (var i = 1; i < floatStr.length; i++) {
      result += digits[parseInt(floatStr[i])];
    }

    return point + result;
  } else {
    return '';
  }
}

function intToChinese(number) {
  if (number === 0) return digits[0];
  var unitPos = 0;
  var result = '';
  var chnStr = '';
  var needZero = false;

  while (number > 0) {
    var section = number % 10000;

    if (needZero) {
      chnStr = digits[0] + chnStr;
    }

    chnStr = sectionToChinese(section);
    chnStr += section !== 0 ? unitSections[unitPos] : unitSections[0];
    result = chnStr + result;
    needZero = section < 1000 && section > 0;
    number = Math.floor(number / 10000);
    unitPos++;
  }

  return result;
}

function numberToChinese(number) {
  if (!isNumber(number)) {
    return number.toString();
  }

  var int = Math.floor(number);
  var floatChinese = floatToChinese(number);
  var intChinese = intToChinese(int);
  return intChinese + floatChinese;
}

exports.numberToChinese = numberToChinese;
